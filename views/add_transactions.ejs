<%- include('partials/default_template.ejs'); %>
<div class="content">
  <div class="container-fluid">
    <!-- your content here -->
    <div class = "row">
        <div class = "col-md shadow-sm p-3 mb-5 bg-white rounded border border-light">
            <h1>Add Transactions</h1>
            <span class = "go-to-cart"><a href = "/add_cart"><button type = "button" class = "btn btn-info">Go to Cart <i class="fas fa-chevron-circle-right"></i></button></a></span>
            <table class="table table-hover table-striped" id="productTable">
                <thead class = "thead-dark">
                    <tr>
                        <th class="text-center product-col">Book Title</th>
                        <th class="text-left subtotal-col">Price</th>
                        <th class="text-left subtotal-col">Variant</th>
                        <th class="text-center add-col">Add to Cart</th>
                    </tr>
                </thead>
                <tbody>
                    <% for (let i=0; i < product.length; i++){%>
                        <!-- <form class = "<%= product[i].variant_id %>" id = "<%= product[i].item_id %>" method = "GET" action = "/add_cart/<%=product[i].item_id%>/<%=product[i].variant_id%>"> -->
                            <tr>
                                <td class="text-left product-name"><%= product[i].item_name %></td>
                                <td class="text-left product-price"><%= parseFloat(product[i].item_price).toFixed(2) %></td>
                                <td class="text-left product-variant"><%= (product[i].variant_name).charAt(0).toUpperCase() + (product[i].variant_name).substr(1).toLowerCase() %></td>
                                <td class="text-center product-click">
                                <span class="hidden-variant-span" style="display:none"><%= product[i].variant_id %></span>
                                <button type="button" class="btn btn-info <%= product[i].variant_id %> " id = "addCartBtn" value = "<%= product[i].item_id %>"><i class="fas fa-arrow-circle-right"></i>     
                                </td>
                            </tr>
                        <!-- </form> -->
                    <%}%>
                </tbody>
            </table>
        </div>
        <div class="col">
            <form>
                <div class="cart-div">
                    <div id="cartPrototype" style="display:none">
                        <div class="item-cart-div">
                            <div class="row">
                                <div class="col">
                                  <span class="item-name-span"></span>
                                </div>
                                <div class="col">
                                  <span class="variant-name-span"></span>
                                </div>
                                <div class="col">
                                  <span class="quantity-span">Qty</span>
                                  <input type="number" min=1 id="quantity-item" value="1" required/>
                                  <span class="solo-price-span" style="display:none"></span>
                                  <span class="total-price-span">Total Price:</span>
                                </div>
                                <div class="col">
                                    <span style="display:none" class="item-index"></span>
                                  <button id="finalRemoveFromCartBtn" class="btn btn-danger">Remove</button>
                                </div>
                              </div>
                        </div>
                    </div>
                </div>
                <button id="confirmTransactionBtn" class="btn" type="submit">Confirm Transaction</button>
            </form>
        </div>
    </div>
  </div>
</div>
<%- include('partials/footer.ejs'); %>
</div> <!--Closing div-->
</body>
</html>
<script src="/assets/js/pages/product_table.js" type="text/javascript"></script>
